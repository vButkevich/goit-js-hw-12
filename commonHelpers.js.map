{"version":3,"file":"commonHelpers.js","sources":["../src/js/iziToastHelper.js","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["'use strict';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function showInfo(message, position = 'center') {\n  iziToast.info({\n    title: 'Info',\n    message: message,\n    position: position,\n  });\n}\nexport function showError(message, position = 'center') {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: position, //'topCenter',\n  });\n}\n","'use strict';\nconsole.log('renderData:v.2.03');\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nvar lightbox = new SimpleLightbox('.gallery a', {\n  // captionPosition: 'bottom',\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst renderData = async data => {\n  if (data.length === 0) {\n    return;\n  }\n  /*\n  //test:preview;\n  data.forEach(item => {\n    const imgElement = document.createElement('img');\n    imgElement.src = item.previewURL;\n    imgElement.alt = item.tags;\n    gallery.appendChild(imgElement);\n  });\n  */\n  let galleryHTML = '';\n  if (document.querySelector('.gallery-list') != null) {\n    galleryHTML = document.querySelector('.gallery-list').innerHTML;\n  }\n  galleryHTML += await data\n    .map(item => {\n      let galleryItem = `\n            <li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n                    <img class=\"gallery-image\" src=\"${item.webformatURL}\" alt=\"${item.tags}\" />\n                </a>\n                <ul class=\"item-info\">\n                    <li><h3 class=\"item-title\">Likes</h3>    <p class=\"item-text\">${item.likes}</p>\n                    <li><h3 class=\"item-title\">Views</h3>    <p class=\"item-text\">${item.views}</p>\n                    <li><h3 class=\"item-title\">Comments</h3> <p class=\"item-text\">${item.comments}</p>\n                    <li><h3 class=\"item-title\">Downloads</h3><p class=\"item-text\">${item.downloads}</p>\n                </ul>\n            </li>\n        `;\n      return galleryItem;\n    })\n    .join('');\n  gallery.innerHTML = `<ul class=\"gallery-list\">${galleryHTML}</ul>`;\n\n  lightbox.refresh();\n};\n\nconsole.log('renderData:loaded...');\nexport default renderData;\n","'use strict';\nimport axios from 'axios';\n\nconst pixabay = async (searchTerm, page, pageItems = 15) => {\n  console.log(`pixabay:search=>[${searchTerm}]`);\n  // const pageItems = 15;\n  const baseUrl = 'https://pixabay.com/api/';\n  const api_key = '42700764-e859e8fc9280be2dbaa9956c4';\n  const queryParams = {\n    key: api_key,\n    q: searchTerm,\n    safesearch: true,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    per_page: pageItems,\n    page: page,\n  };\n\n  try {\n    const url = baseUrl;\n    const config = { params: queryParams };\n    const response = await axios.get(url, config);\n    return response;\n  } catch (error) {\n    console.error('pixabay:Error fetching images:', error);\n    throw error;\n  } finally {\n    console.log(`pixabay:search.end;`);\n  }\n};\n\nconsole.log('pixaBay.api:loaded...');\nexport default pixabay;\n","'use strict';\nimport * as izi from './js/iziToastHelper';\nimport renderData from './js/render-functions';\nimport pixabay from './js/pixabay-api';\n\nlet page = 1;\nlet searchTerm = '';\nconst searchForm = document.getElementById('searchForm');\nconst searchInput = document.getElementById('searchInput');\n\nconst searchBtn = document.getElementById('submit');\nsearchBtn.disabled = true;\n\nconst gallery = document.getElementById('gallery');\nconst loadingIndicator = document.getElementById('loading-indicator');\nconst loadMoreBtn = document.getElementById('load-more-btn');\n\nsearchInput.addEventListener('input', e => {\n  searchBtn.disabled = searchInput.value.trim() === '';\n});\n\nsearchForm.addEventListener('submit', async e => {\n  e.preventDefault();\n  gallery.innerHTML = '';\n  showLoadingIndicator();\n\n  searchTerm = searchInput.value.trim();\n  if (searchTerm === '') {\n    console.log('Please enter a search term.');\n    return izi.showError('Please enter a search term.');\n  }\n\n  await getImages(1);\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  page++;\n  await getImages(page);\n});\n\nasync function getImages(page) {\n  showLoadingIndicator();\n\n  try {\n    const pageItems = 15;\n    loadMoreBtn.style.display = 'none';\n\n    let response = await pixabay(searchTerm, page, pageItems);\n    const data = response.data;\n    const hits = data.hits;\n    renderData(hits);\n\n    const totalHits = data.totalHits || 0;\n    console.log('totalHits:', totalHits);\n    if (totalHits === 0) {\n      const msg = `main: Sorry, there are no images matching your search query: [${searchTerm}]. Please try again!`;\n      hideLoadingIndicator();\n      return izi.showError(msg);\n    }\n    if (totalHits <= page * pageItems) {\n      const msg = \"We're sorry, but you've reached the end of search results.\";\n      return izi.showInfo(msg);\n    }\n    loadMoreBtn.style.display = 'block';\n  } catch (error) {\n    izi.showError(error.message);\n  } finally {\n    hideLoadingIndicator();\n  }\n}\n\nfunction showLoadingIndicator() {\n  loadingIndicator.style.display = 'block';\n  loadMoreBtn.style.display = 'none';\n}\n\nfunction hideLoadingIndicator() {\n  loadingIndicator.style.display = 'none';\n}\n"],"names":["showInfo","message","position","iziToast","showError","lightbox","SimpleLightbox","renderData","data","galleryHTML","item","pixabay","searchTerm","page","pageItems","baseUrl","queryParams","url","config","axios","error","searchForm","searchInput","searchBtn","gallery","loadingIndicator","loadMoreBtn","e","showLoadingIndicator","izi.showError","getImages","hits","totalHits","msg","hideLoadingIndicator","izi.showInfo"],"mappings":"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"}